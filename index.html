<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Немое немецкое кино смотреть онлайн - Stummfilm</title>

    <link rel="apple-touch-icon" sizes="57x57" href="resources/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="resources/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="resources/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="resources/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="resources/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="resources/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="resources/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="resources/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="resources/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="resources/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
    <link rel="manifest" href="resources/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="resources/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#000000">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="stylesheets/index.css" />
</head>

<body>
    <div class="header">
        <div class="header__logo">
            stummfilm
        </div>

        <div class="search header-item">
            <svg class="header-item__icon" viewbox="0 0 28 28">
                <path
                    d="M11.5,2 C16.7467051,2 21,6.25329488 21,11.5 C21,13.5819334 20.3302914,15.5074481 19.1945516,17.0728665 L25.5606602,23.4393398 C26.1464466,24.0251263 26.1464466,24.9748737 25.5606602,25.5606602 C25.0114854,26.109835 24.142423,26.1441584 23.5532622,25.6636304 L23.4393398,25.5606602 L17.0728665,19.1945516 C15.5074481,20.3302914 13.5819334,21 11.5,21 C6.25329488,21 2,16.7467051 2,11.5 C2,6.25329488 6.25329488,2 11.5,2 Z M11.5,5 C7.91014913,5 5,7.91014913 5,11.5 C5,15.0898509 7.91014913,18 11.5,18 C15.0898509,18 18,15.0898509 18,11.5 C18,7.91014913 15.0898509,5 11.5,5 Z" />
            </svg>

            <input class="header-item__label" type="text" placeholder="Поиск по названию" id="search-input">
        </div>
    </div>

    <div class="welcome-screen">
        <div class="welcome-screen__content">
            <span class="welcome-screen__label">Добавлен недавно</span>
            <h3 class="welcome-screen__title">
                Hoffmanns<br>
                Erzählungen
            </h3>
        </div>
    </div>

    <main>
        <section class="page-section">
            <div class="page-section__title">Каталог фильмов</div>
            
            <div class="film-list">
                <a class="film-list-item" href="films/erzahlungen.html" data-genres="Фэнтези">
                    <div class="film-list-item__poster">
                        <img data-src="resources/images/posters/erzahlungen.jpg"
                            src="resources/images/placeholder-200x300.svg" alt="Erzahlungen poster">
                    </div>
                    <div class="film-list-item__title">Рассказы Гофмана</div>
                    <div class="film-list-item__year">1916</div>
                </a>

                <a class="film-list-item" href="films/golem.html" data-genres="Исторический, Фантастика, Драма">
                    <div class="film-list-item__poster">
                        <img data-src="resources/images/posters/golem-min.jpg"
                            src="resources/images/placeholder-200x300.svg" alt="Golem poster">
                    </div>
                    <div class="film-list-item__title">Голем, как он пришёл в мир</div>
                    <div class="film-list-item__year">1920</div>
                </a>

                <a class="film-list-item" href="films/nosferatu.html" data-genres="Ужасы, Фентези">
                    <div class="film-list-item__poster">
                        <img data-src="resources/images/posters/nosferatu-min.jpg"
                            src="resources/images/placeholder-200x300.svg" alt="Nosferatu poster">
                    </div>
                    <div class="film-list-item__title">Носферату, симфония ужаса</div>
                    <div class="film-list-item__year">1922</div>
                </a>

                <a class="film-list-item" href="films/faust.html" data-genres="Ужасы, Фентези, Драма">
                    <div class="film-list-item__poster">
                        <img data-src="resources/images/posters/faust-min.jpg"
                            src="resources/images/placeholder-200x300.svg" alt="Nosferatu poster">
                    </div>
                    <div class="film-list-item__title">Фауст</div>
                    <div class="film-list-item__year">1926</div>
                </a>

                <a class="film-list-item" href="films/frau.html" data-genres="">
                    <div class="film-list-item__poster">
                        <img data-src="resources/images/posters/frau-im-mond-min.jpg"
                            src="resources/images/placeholder-200x300.svg" alt="Nosferatu poster">
                    </div>
                    <div class="film-list-item__title">Женщина на луне</div>
                    <div class="film-list-item__year">1929</div>
                </a>
            </div>
        </section>
    </main>

    <footer>
        Made with <img src="resources/heart.svg" alt="love"> by
        <a href="https://danielargent.github.io/index.html">Denis Tsvikevich</a>
    </footer>

    <script>
        function loadImageAsync(img) {
            let image = new Image();
            image.onload = () => img.setAttribute("src", image.src);
            image.src = img.getAttribute("data-src");
        }

        let images = document.querySelectorAll("img[data-src]");
        for (const image of images) {
            loadImageAsync(image);
        }


        function randomInteger(min, max) {
            let rand = min - 0.5 + Math.random() * (max - min + 1);
            return Math.round(rand);
        }

        document.getElementById("random-film").addEventListener("click", () => {
            let filmListItems = [...document.querySelectorAll(".film-list-item")];
            let randomId = randomInteger(0, filmListItems.length - 1);

            document.location = filmListItems[randomId].href;
        });


        var genres = [];

        function applyGenres() {
            for (const item of document.querySelectorAll(".film-list-item")) {
                if (genres.length === 0) {
                    item.classList.remove("hide");
                    continue;
                }

                item.classList.add("hide");

                let itemGenres = item.getAttribute("data-genres");
                if (itemGenres) {
                    let flag = false;
                    for (const genre of genres) {
                        if (itemGenres.includes(genre)) {
                            flag = true;
                            break;
                        }
                    }

                    if (flag) {
                        item.classList.remove("hide");
                    }
                }
            }
        }

        function toggleGenre(event) {
            event.target.classList.toggle("active");

            let name = event.target.innerText;
            if (!genres.includes(name)) {
                genres.push(name);
            } else {
                genres.splice(genres.indexOf(name), 1);
            }

            applyGenres();
        }

        document.getElementById("genre-film").addEventListener("click", () => {
            document.getElementById("genre-film").classList.toggle("active");
            document.getElementById("genres-panel").classList.toggle("hide");
        });

        for (const element of document.getElementsByClassName("genre")) {
            element.addEventListener('click', toggleGenre);
        }


        let searchInput = document.querySelector("#search-input");

        function onSearchUpdate() {
            let textToSearch = searchInput.value;

            if (textToSearch) {
                document.getElementById("search-film").classList.add("active");
            } else {
                document.getElementById("search-film").classList.remove("active");
            }

            for (const item of document.querySelectorAll(".film-list-item")) {
                let title = item.getElementsByClassName("film-list-item__title")[0].innerText.toLowerCase();

                item.style.display = 'none';

                if (!textToSearch || title.includes(textToSearch)) {
                    item.style.display = 'block';
                }
            }
        }

        searchInput.addEventListener('change', onSearchUpdate);
        searchInput.addEventListener('input', onSearchUpdate);
    </script>
</body>

</html>